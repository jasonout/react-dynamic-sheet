!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("react"),require("prop-types"),require("framer-motion"),require("react-append-to-body"),require("react-measure"),require("styled-components"),require("react-shadow/styled-components"),require("modern-normalize"),require("react-scrolllock"),require("react-feather/dist/icons/x"),require("react-fixed-bottom"),require("lodash.debounce")):"function"==typeof define&&define.amd?define(["exports","react","prop-types","framer-motion","react-append-to-body","react-measure","styled-components","react-shadow/styled-components","modern-normalize","react-scrolllock","react-feather/dist/icons/x","react-fixed-bottom","lodash.debounce"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).reactDynamicSheet={},t.React,t.PropTypes,t.framerMotion,t.reactAppendToBody,t.Measure,t.styled,t.root$1,t.modernNormalize,t.ScrollLock,t.CloseIcon,t.reactFixedBottom,t.debounce$1)}(this,(function(t,e,n,r,o,i,a,l,u,c,d,s,f){"use strict";function p(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var b=p(e),h=p(n),m=p(i),y=p(a),g=p(l),v=p(u),x=p(c),w=p(d),O=p(f),C=h.default.oneOfType([h.default.string,h.default.func,h.default.node,h.default.arrayOf(h.default.node)]);function j(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function E(){return(E=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function k(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function S(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?k(Object(n),!0).forEach((function(e){j(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function P(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function T(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function M(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,l=t[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return R(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function q(){var t=T(["\n\t","\n\t-webkit-font-smoothing: antialiased;\n\t-moz-osx-font-smoothing: grayscale;\n\n\t* {\n\t\tbox-sizing: border-box;\n\t}\n"]);return q=function(){return t},t}var z=a.createGlobalStyle(q(),v.default),B=function(t){var e=t.style,n=t.children,r=P(t,["style","children"]);return b.default.createElement(g.default.div,E({style:S({display:"block",overflow:"scroll",WebkitOverflowScrolling:"touch",border:0},e)},r),b.default.createElement(z,null),n)};function H(){var t=T(["\n\tposition: fixed;\n\tleft: 0;\n\tright: 0;\n\ttop: 0;\n\tbottom: 0;\n\tz-index: 5;\n\toverflow: auto;\n\t-webkit-overflow-scrolling: touch;\n\n\t","\n\n\t@media (min-width: 450px) {\n\t\tpadding: 20px;\n\t}\n"]);return H=function(){return t},t}function A(){var t=T(["\n\toverflow: hidden;\n\tposition: fixed;\n\tleft: 0;\n\tright: 0;\n\ttop: 0;\n\tbottom: 0;\n\tz-index: 99999999999;\n\twidth: 100vw;\n\theight: 100vh;\n"]);return A=function(){return t},t}B.propTypes={style:h.default.object,children:h.default.oneOfType([h.default.string,h.default.func,h.default.node,h.default.arrayOf(h.default.node)]).isRequired},B.defaultProps={style:{}};var D=y.default(B)(A()),N=y.default.div(H(),(function(t){return"number"==typeof t.contentFixBreakpoint&&"@media (min-width: 450px) and (min-height: ".concat("".concat(t.contentFixBreakpoint,"px"),") {\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tjustify-contents: center;\n\t\t\t\toverflow: hidden;\n\t\t}")})),F=r.motion.custom(N),$=b.default.forwardRef((function(t,e){var n=t.children,r=t.type,o=P(t,["children","type"]);return b.default.createElement(F,E({ref:e,variants:{hidden:{backgroundColor:"rgba(0, 0, 0, 0)",opacity:0,pointerEvents:"none"},visible:{backgroundColor:"menu"===r?"rgba(0, 0, 0, 0.35)":"rgba(0, 0, 0, 0.7)",opacity:1,pointerEvents:"auto"}},initial:"hidden",animate:"visible",exit:"hidden",transition:{duration:.25}},o),n)}));$.propTypes={children:C.isRequired,type:h.default.string},$.defaultProps={type:"modal"};var I=function(t){var e=t.children,n=P(t,["children"]);return b.default.createElement(D,n,b.default.createElement(x.default,null,e))};function W(){var t=T(["\n\tposition: absolute;\n\tright: 5px;\n\ttop: 5px;\n\theight: 30px;\n\twidth: 30px;\n\tpadding: 0;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tborder-radius: 4px;\n\tbackground-color: rgba(0, 0, 0, 0);\n\tcolor: rgb(120, 120, 120);\n\tz-index: 100;\n\tborder: none;\n\toutline: 0;\n\ttransition: background-color 0.25s, color 0.25s;\n\n\t&:hover {\n\t\tbackground-color: rgba(100, 100, 100, 0.1);\n\t\tcolor: rgb(100, 100, 100);\n\t\tcursor: pointer;\n\t}\n\t&:active {\n\t\tbackground-color: rgba(100, 100, 100, 0.15);\n\t}\n\t& > svg {\n\t\tstroke-width: 3px;\n\t}\n"]);return W=function(){return t},t}I.propTypes={children:C.isRequired};var L=y.default.button(W()),V=function(t){var e=t.onClick;return b.default.createElement(L,{onClick:e},b.default.createElement(w.default,{size:22}))};function _(){var t=T(["\n\tposition: relative;\n\tbox-sizing: content-box;\n\tdisplay: flex;\n\tflex-direction: row;\n\talign-items: stretch;\n\tjustify-content: center;\n"]);return _=function(){return t},t}function G(){var t=T(["\n\tmax-width: 768px;\n\tmargin: 0 auto;\n\twidth: 100%;\n\tmin-height: 100%;\n\tposition: relative;\n\tbackground-color: #fff;\n\n\t@media (min-width: 450px) {\n\t\tmin-height: auto !important;\n\t\tborder-radius: 10px;\n\t\toverflow: hidden;\n\t\tbox-shadow: 0 30px 60px -12px rgba(50, 50, 93, 0.25),\n\t\t\t0 18px 36px -18px rgba(0, 0, 0, 0.3),\n\t\t\t0 -12px 36px -8px rgba(0, 0, 0, 0.025);\n\t}\n"]);return G=function(){return t},t}V.propTypes={onClick:h.default.func.isRequired};var U=y.default.div(G()),X=y.default.div(_()),J=r.motion.custom(U),K=function(t){var n=t.children,r=t.isOpen,o=t.onClose,i=P(t,["children","isOpen","onClose"]),a=M(e.useState(500),2),l=a[0],u=a[1];return r&&b.default.createElement(I,null,b.default.createElement($,{contentFixBreakpoint:l},b.default.createElement(m.default,{bounds:!0,onResize:function(t){var e,n=t.bounds;return n.width,e=n.height,void u(e)}},(function(t){var e=t.measureRef;return b.default.createElement(J,E({sx:{color:"text",bg:"background"},variants:{hidden:{opacity:0,visibility:"hidden",y:20},visible:{opacity:1,visibility:"visible",y:0}},initial:"hidden",animate:"visible",exit:"hidden",transition:{duration:.25,delay:.25},ref:e},i),b.default.createElement(V,{onClick:o}),b.default.createElement(X,null,b.default.createElement("slot",{name:"dynamic-sheet-content"},n)))}))))};K.propTypes={children:C.isRequired,onClose:h.default.func.isRequired,isOpen:h.default.bool},K.defaultProps={isOpen:!1};var Q=o.componentWillAppendToBody(K),Y="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Z=/^\s+|\s+$/g,tt=/^[-+]0x[0-9a-f]+$/i,et=/^0b[01]+$/i,nt=/^0o[0-7]+$/i,rt=parseInt,ot="object"==typeof Y&&Y&&Y.Object===Object&&Y,it="object"==typeof self&&self&&self.Object===Object&&self,at=ot||it||Function("return this")(),lt=Object.prototype.toString,ut=Math.max,ct=Math.min,dt=function(){return at.Date.now()};function st(t,e,n){var r,o,i,a,l,u,c=0,d=!1,s=!1,f=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function p(e){var n=r,i=o;return r=o=void 0,c=e,a=t.apply(i,n)}function b(t){return c=t,l=setTimeout(m,e),d?p(t):a}function h(t){var n=t-u;return void 0===u||n>=e||n<0||s&&t-c>=i}function m(){var t=dt();if(h(t))return y(t);l=setTimeout(m,function(t){var n=e-(t-u);return s?ct(n,i-(t-c)):n}(t))}function y(t){return l=void 0,f&&r?p(t):(r=o=void 0,a)}function g(){var t=dt(),n=h(t);if(r=arguments,o=this,u=t,n){if(void 0===l)return b(u);if(s)return l=setTimeout(m,e),p(u)}return void 0===l&&(l=setTimeout(m,e)),a}return e=pt(e)||0,ft(n)&&(d=!!n.leading,i=(s="maxWait"in n)?ut(pt(n.maxWait)||0,e):i,f="trailing"in n?!!n.trailing:f),g.cancel=function(){void 0!==l&&clearTimeout(l),c=0,r=u=o=l=void 0},g.flush=function(){return void 0===l?a:y(dt())},g}function ft(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function pt(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==lt.call(t)}(t))return NaN;if(ft(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=ft(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Z,"");var n=et.test(t);return n||nt.test(t)?rt(t.slice(2),n?2:8):tt.test(t)?NaN:+t}var bt=function(t,e,n){var r=!0,o=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return ft(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),st(t,e,{leading:r,maxWait:e,trailing:o})};function ht(){var t=T(['\n\tposition: relative;\n\tpadding: 30px 8px calc(30px + env(safe-area-inset-bottom, 0px)) 8px;\n\toverflow: auto;\n\tz-index: 5;\n\tposition: relative;\n\tbottom: 0px;\n\tmin-height: calc(100vh - env(safe-area-inset-top, 0px) * 2);\n\tmax-height: calc(100vh - env(safe-area-inset-top, 0px) * 2);\n\tpadding-bottom: calc(30px + env(safe-area-inset-bottom, 0px)) !important;\n\tbox-sizing: content-box;\n\n\t&:before {\n\t\tcontent: "";\n\t\tposition: absolute;\n\t\tleft: 0;\n\t\tright: 0;\n\t\ttop: 8px;\n\t\theight: 6px;\n\t\twidth: 32px;\n\t\tbackground-color: #888;\n\t\topacity: 0.5;\n\t\tborder-radius: 100px;\n\t\tmargin: 0 auto;\n\t\tz-index: 100;\n\t\tborder: none;\n\t\toutline: 0;\n\t}\n\n\t& [name="dynamic-sheet-content"] > *:first-child {\n\t\tpadding-bottom: calc(env(safe-area-inset-bottom) + 8px);\n\t\ttop: 30px;\n\t\tright: 0px;\n\t\tleft: 0px;\n\t\tmax-height: calc(100vh - 96px);\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: flex-start;\n\t\toverflow-y: scroll !important;\n\t}\n\n\t.type-menu & {\n\t\tmin-height: unset;\n\t\tpadding-bottom: max(env(safe-area-inset-bottom, 0px), 8px) !important;\n\n\t\t& [name="dynamic-sheet-content"] > *:first-child {\n\t\t\tpadding-bottom: unset;\n\t\t}\n\n\t\t:before {\n\t\t\tdisplay: none;\n\t\t}\n\t}\n']);return ht=function(){return t},t}function mt(){var t=T(["\n\tposition: absolute;\n\tleft: -100px;\n\tright: -100px;\n\ttop: 100px;\n\tbottom: -999999px;\n\tborder-radius: inherit;\n\tbackground: inherit;\n"]);return mt=function(){return t},t}function yt(){var t=T(["\n\tposition: absolute;\n\ttop: 0.75rem;\n\tright: 0.75rem;\n\tborder-radius: 50%;\n\tbackground-color: rgba(0, 0, 0, 0.25);\n\twidth: 28px;\n\theight: 28px;\n\tdisplay: flex;\n\talign-content: center;\n\talign-items: center;\n\tjustify-content: center;\n\ttext-transform: lowercase;\n\tcolor: var(--colors-text, #fff);\n"]);return yt=function(){return t},t}function gt(){var t=T(["\n\twidth: 100%;\n\tborder-radius: 9px 9px 0 0;\n\tbox-shadow: 0 30px 60px -12px rgba(50, 50, 93, 0.25),\n\t\t0 18px 36px -18px rgba(0, 0, 0, 0.3), 0 -12px 36px -8px rgba(0, 0, 0, 0.025);\n\tborder-top: solid 1px rgba(108, 108, 108, 0.25);\n\tbackdrop-filter: blur(20px);\n\topacity: 0.85;\n\tposition: relative;\n\tleft: 0;\n\tright: 0;\n\tbackground-color: #fff;\n\tbox-sizing: content-box;\n\n\t.type-menu & {\n\t\tbackground-color: unset;\n\t\tborder-top: 0;\n\t\tbox-shadow: none;\n\t\tbackdrop-filter: none;\n\t\topacity: 0.945;\n\t}\n"]);return gt=function(){return t},t}var vt=y.default.div(gt()),xt=y.default.div(yt()),wt=y.default.div(mt()),Ot=y.default.div(ht()),Ct=r.motion.custom(vt),jt={Mini:{y:80,name:"mini"},Mid:{y:.5,name:"mid"},Full:{y:-8,name:"full"}},Et={DefaultSheet:[jt.Mini,jt.Mid,jt.Full]},kt=function(t,e){var n=e.bodyRect,r=e.visibleHeight,o=e.windowHeight;return t<=1&&t>=0?n.height-o*t:t<24?r+44+Math.abs(t):n.height-44-t},St=function(t){var n=t.children,o=t.type,i=t.onClose,a=t.snapPoints,l=void 0===a?Et.DefaultSheet:a,u=t.onClick,c=t.isModal,d=t.showClose,f=P(t,["children","type","onClose","snapPoints","onClick","isModal","showClose"]),p=M(e.useState(!1),2),h=p[0],m=p[1],y=M(e.useState(!1),2),g=y[0],v=y[1],x=M(e.useState(null),2),w=x[0],C=x[1],k=r.useAnimation(),T=e.useRef(),R={hidden:{y:window&&window.innerHeight?window.innerHeight:"200%"},visible:{y:0}},q={top:36},z=null;if(h){var B=T.current.getBoundingClientRect(),H=B.height-window.innerHeight;z=function(t,e){var n=e.bodyRect,r=e.visibleHeight,o=e.windowHeight,i=t.map((function(t){return S(S({},t),{},{yPixel:kt(t.y,{bodyRect:n,visibleHeight:r,windowHeight:o})})}));return{getModeStateFromPixel:function(t){return i.reduce((function(e,n){var r=Math.abs(n.yPixel-t);return r<e.closest&&(e.closest=r,e.closestSnap=n.name),n.yPixel>=t&&(e.activeSnap=n.name),e}),{activeSnap:null,closest:999999,closestSnap:null})},toVariants:function(){return i.reduce((function(t,e){return Object.assign(t,j({},e.name,{y:e.yPixel}))}),{})}}}(l,{bodyRect:B,visibleHeight:H,windowHeight:window.innerHeight}),R=S(S({},R),{},{hidden:{y:2*B.height}},z.toVariants()),q={top:H+44}}else if(T.current){var A=T.current.getBoundingClientRect();R=S(S({},R),{},{hidden:{y:2*A.height}})}var D=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return function(e){return e.preventDefault(),e.stopPropagation(),t(e)}},N=bt((function(t,e){if(z)if("full"!==w){var n=T.current?T.current.getBoundingClientRect().top:e.point.y,r=z.getModeStateFromPixel(n);r.closestSnap!==w&&C(r.closestSnap)}else{T.current.childNodes[0].childNodes[0].scrollTop-=e.delta.y}}),10,{trailing:!1}),F=O.default((function(t,e){if(!z){var n=e.velocity.y>20&&e.point.y>0||e.velocity.y>=0&&e.point.y>45;if(c||"menu"===o)return;n&&(k.start("hidden"),C("hidden"),i())}var r=T.current?T.current.getBoundingClientRect().top:e.point.y,a=z.getModeStateFromPixel(r+e.velocity.y),l=T.current&&T.current.childNodes[0].childNodes[0];l&&("full"===w&&"full"===a.closestSnap?l.scrollTo(0,l.scrollTop-e.velocity.y):"full"!==a.closestSnap&&l.scrollTo(0,0)),C(a.closestSnap),k.start(a.closestSnap)}),250,{leading:!0,trailing:!1});e.useEffect((function(){if(g){var t=T.current.getBoundingClientRect(),e=t.height>window.innerHeight/2;m(e),e?k.start((function(){return{y:t.height-window.innerHeight/2}})):k.start((function(){return{y:0}})),C("visible")}else v(!0)}),[k,g]);var W={},L={};return"menu"===o&&(W.onClick=i,L.dragTransition={damping:100,stiffness:500},q.top=0,q.bottom=0),b.default.createElement(I,null,b.default.createElement($,E({sx:{overflow:"hidden !important"},className:"type-".concat(o),type:o},W),b.default.createElement(s.FixedBottom,null,b.default.createElement(Ct,E({sx:{color:"text",bg:"white"},drag:"y",dragElastic:.005},L,{onDrag:N,onDragEnd:F,dragConstraints:q,dragPropagation:!0,variants:R,initial:"hidden",animate:k,exit:"hidden",transition:{type:"tween",ease:"easeInOut"},onClick:D(u)},f),b.default.createElement(wt,{onClick:D()}),b.default.createElement(Ot,{ref:T,className:"sz-".concat(w),$isExpandable:h},b.default.createElement("slot",{name:"dynamic-sheet-content"},n),d&&!c?b.default.createElement(xt,{className:"close-btn",onClick:function(){k.start("hidden"),C("hidden"),i()}},"X"):null)))))},Pt=function(t){var e=t.isOpen,n=P(t,["isOpen"]);return b.default.createElement(r.AnimatePresence,{exitBeforeEnter:!0},e&&b.default.createElement(St,n))};St.propTypes={children:C.isRequired,onClose:h.default.func.isRequired,onClick:h.default.func,isModal:h.default.bool,showClose:h.default.bool,type:h.default.string,snapPoints:h.default.arrayOf(h.default.object)},St.defaultProps={onClick:function(){},isModal:!1,showClose:!1,type:"modal",snapPoints:Et.DefaultSheet},Pt.propTypes={isOpen:h.default.bool},Pt.defaultProps={isOpen:!1};var Tt=o.componentWillAppendToBody(Pt),Mt=function(t){var n=t.children,r=t.isOpen,o=t.onClose,i=t.confirmClose,a=t.confirmCloseMessage,l=t.showClose,u=t.type,c=window.innerWidth<450,d=function(){if(i&&!window.confirm(a))return!1;return o()};return e.useEffect((function(){var t,e=(t=a,function(e){return(e||window.event).returnValue=t,t});return i&&(window.onbeforeunload=e,window.addEventListener("beforeunload",e,!1)),function(){window.onbeforeunload=null,window.removeEventListener("beforeunload",e,!1)}}),[i,a]),c?b.default.createElement(Tt,{isOpen:r,onClose:d,type:u,showClose:l},n):b.default.createElement(Q,{isOpen:r,onClose:d,type:u},n)};Mt.propTypes={children:C.isRequired,isOpen:h.default.bool,onClose:h.default.func,confirmClose:h.default.bool,confirmCloseMessage:h.default.string,type:h.default.string,showClose:h.default.bool},Mt.defaultProps={isOpen:!1,onClose:function(){},confirmClose:!1,confirmCloseMessage:"Are you sure you would like to abort the checkout?",type:"modal",showClose:!1},t.BottomSheet=Tt,t.Modal=Q,t.default=Mt,Object.defineProperty(t,"__esModule",{value:!0})}));
